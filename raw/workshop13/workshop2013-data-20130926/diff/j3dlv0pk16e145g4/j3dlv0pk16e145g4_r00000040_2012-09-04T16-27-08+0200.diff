diff -u -r -N -x '*.o' -x Thumbs.db -x .DS_Store -x CMakeCache.txt -x misc/seqan_instrumentation/userdata/id.txt -x /home/felix/seqan/misc/seqan_instrumentation/userdata/id.txt -x misc/seqan_instrumentation/userdata/j3dlv0pk16e145g4_stats.txt -x /home/felix/seqan/misc/seqan_instrumentation/userdata/j3dlv0pk16e145g4_stats.txt -x .svn -x bin -x build -x util -x misc -x docs -x docs2 -x extras -x core -x misc/seqan_instrumentation/bin -x /home/felix/seqan/misc/seqan_instrumentation/bin -x misc/seqan_instrumentation/last_revision_copy -x /home/felix/seqan/misc/seqan_instrumentation/last_revision_copy -x misc/seqan_instrumentation/last_revision_copy -x /home/felix/seqan/misc/seqan_instrumentation/last_revision_copy -x misc/seqan_instrumentation/userdata -x /home/felix/seqan/misc/seqan_instrumentation/userdata -x misc/seqan_instrumentation/userdata -x /home/felix/seqan/misc/seqan_instrumentation/userdata ./misc/seqan_instrumentation/last_revision_copy/sandbox/my_sandbox/apps/rnaseq_app/rnaseq_app.cpp ./sandbox/my_sandbox/apps/rnaseq_app/rnaseq_app.cpp
--- ./misc/seqan_instrumentation/last_revision_copy/sandbox/my_sandbox/apps/rnaseq_app/rnaseq_app.cpp	2012-09-04 16:10:57.000000000 +0200
+++ ./sandbox/my_sandbox/apps/rnaseq_app/rnaseq_app.cpp	2012-09-04 16:27:03.800670294 +0200
@@ -7,6 +7,10 @@
 using namespace seqan;
 // define used types
 typedef FragmentStore<> TStore;
+typedef Value<TStore::TAnnotationStore>::Type   TAnnotation;
+typedef TAnnotation::TId                        TId;
+typedef TAnnotation::TId                        TPos;
+typedef IntervalAndCargo<TPos, TId>             TInterval;
 // define options
 struct Options
 {
@@ -41,21 +45,43 @@
 bool loadFiles(TStore & store, Options const & options)
 {
     std::ifstream alnFile(toCString(options.alignmentFileName), std::ifstream::in);
+    if (alnFile.good())
+    {
+        std::cerr << "ERROR: Could not open alignment file." << std::endl;
+        return false
+    }
     read(alnFile, store, Sam());
     alnFile.close();
     std::ifstream annotationFile(toCString(options.annotationFileName), std::ifstream::in);
+    if (!annotationFile.good)
+    {
+        std::cerr << "ERROR: Could not open annotation file." << std::endl;
+        return false
+    }
     read(annotationFile, store, Gtf());
     annotationFile.close();
     return true;
 }
+
+//
+// 3. Extract intervals from gene annotations (grouped by contigId)
+//
+void extractGeneIntervals(String<String<TInterval> > & intervals, TStore const & store)
+{
+    
+}
+
 int main(int argc, char const * argv[])
 {
     Options options;
     TStore store;
+    String<String<TInterval> > intervals;
+    
     ArgumentParser::ParseResult res = parseOptions(options, argc, argv);
     if (res != ArgumentParser::PARSE_OK)
         return res == ArgumentParser::PARSE_ERROR;
     if (!loadFiles(store, options))
         return 1;
+    extractGeneIntervals(intervals, store);
     return 0;
 }
diff -u -r -N -x '*.o' -x Thumbs.db -x .DS_Store -x CMakeCache.txt -x misc/seqan_instrumentation/userdata/id.txt -x /home/felix/seqan/misc/seqan_instrumentation/userdata/id.txt -x misc/seqan_instrumentation/userdata/j3dlv0pk16e145g4_stats.txt -x /home/felix/seqan/misc/seqan_instrumentation/userdata/j3dlv0pk16e145g4_stats.txt -x .svn -x bin -x build -x util -x misc -x docs -x docs2 -x extras -x core -x misc/seqan_instrumentation/bin -x /home/felix/seqan/misc/seqan_instrumentation/bin -x misc/seqan_instrumentation/last_revision_copy -x /home/felix/seqan/misc/seqan_instrumentation/last_revision_copy -x misc/seqan_instrumentation/last_revision_copy -x /home/felix/seqan/misc/seqan_instrumentation/last_revision_copy -x misc/seqan_instrumentation/userdata -x /home/felix/seqan/misc/seqan_instrumentation/userdata -x misc/seqan_instrumentation/userdata -x /home/felix/seqan/misc/seqan_instrumentation/userdata ./misc/seqan_instrumentation/last_revision_copy/sandbox/my_sandbox/apps/rnaseq_app/rnaseq_app.cpp~ ./sandbox/my_sandbox/apps/rnaseq_app/rnaseq_app.cpp~
--- ./misc/seqan_instrumentation/last_revision_copy/sandbox/my_sandbox/apps/rnaseq_app/rnaseq_app.cpp~	2012-09-04 16:10:31.000000000 +0200
+++ ./sandbox/my_sandbox/apps/rnaseq_app/rnaseq_app.cpp~	2012-09-04 16:26:26.144483567 +0200
@@ -7,6 +7,10 @@
 using namespace seqan;
 // define used types
 typedef FragmentStore<> TStore;
+typedef Value<TStore::TAnnotationStore>::Type   TAnnotation;
+typedef TAnnotation::TId                        TId;
+typedef TAnnotation::TId                        TPos;
+typedef IntervalAndCargo<TPos, TId>             TInterval;
 // define options
 struct Options
 {
@@ -41,21 +45,44 @@
 bool loadFiles(TStore & store, Options const & options)
 {
     std::ifstream alnFile(toCString(options.alignmentFileName), std::ifstream::in);
+    if (alnFile.good())
+    {
+        std::cerr << "ERROR: Could not open alignment file." << std::endl;
+        return false
+    }
     read(alnFile, store, Sam());
-    alnFile.close()
+    alnFile.close();
     std::ifstream annotationFile(toCString(options.annotationFileName), std::ifstream::in);
+    if (!annotationFile.good)
+    {
+        std::cerr << "ERROR: Could not open annotation file." << std::endl;
+        return false
+    }
     read(annotationFile, store, Gtf());
-    annotationFile.close()
+    annotationFile.close();
     return true;
 }
+
+//
+// 3. Extract intervals from gene annotations (grouped by contigId)
+//
+void extractGeneIntervals(String<String<TInterval> > & intervals, TStore const & store)
+{
+    // INSERT YOUR CODE HERE ...
+    //
+}
+
 int main(int argc, char const * argv[])
 {
     Options options;
     TStore store;
+    String<String<TInterval> > intervals;
+    
     ArgumentParser::ParseResult res = parseOptions(options, argc, argv);
     if (res != ArgumentParser::PARSE_OK)
         return res == ArgumentParser::PARSE_ERROR;
     if (!loadFiles(store, options))
         return 1;
+    extractGeneIntervals(intervals, store);
     return 0;
 }
